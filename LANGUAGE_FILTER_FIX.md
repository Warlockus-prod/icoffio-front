# üåç –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –§–ò–õ–¨–¢–†–ê–¶–ò–ò –ü–û –Ø–ó–´–ö–ê–ú

**–î–∞—Ç–∞:** 2025-11-03  
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Å—Ç–∞—Ç—å–∏ –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ –Ω–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–ª–∏—Å—å –ø–æ —è–∑—ã–∫—É (en/pl), –ø–æ–∫–∞–∑—ã–≤–∞–ª–∏—Å—å —Å—Ç–∞—Ç—å–∏ –æ–±–æ–∏—Ö —è–∑—ã–∫–æ–≤ —Å–º–µ—à–∞–Ω–Ω–æ

---

## üêõ –ü–†–û–ë–õ–ï–ú–ê

–ù–∞ –ø–æ–ª—å—Å–∫–æ–π –≤–µ—Ä—Å–∏–∏ —Å–∞–π—Ç–∞ (`/pl`) –º–æ–≥–ª–∏ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å—Å—è –∞–Ω–≥–ª–∏–π—Å–∫–∏–µ —Å—Ç–∞—Ç—å–∏ –∏ –Ω–∞–æ–±–æ—Ä–æ—Ç, –ø–æ—Ç–æ–º—É —á—Ç–æ:

1. `getPopularArticles()` –≤ `lib/supabase-analytics.ts` –ù–ï —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–ª–∞ –ø–æ —è–∑—ã–∫—É
2. API `/api/analytics/popular-articles/` –ù–ï –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–ª –ø–∞—Ä–∞–º–µ—Ç—Ä `locale`
3. –í –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –µ—Å—Ç—å —Ñ—É–Ω–∫—Ü–∏—è `get_popular_articles(lang, limit)`, –Ω–æ –æ–Ω–∞ –ù–ï –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞—Å—å

---

## ‚úÖ –†–ï–®–ï–ù–ò–ï

### 1. –û–±–Ω–æ–≤–ª–µ–Ω–∞ `lib/supabase-analytics.ts`

**–ë—ã–ª–æ:**
```typescript
export async function getPopularArticles(limit: number = 10): Promise<string[]>
```

**–°—Ç–∞–ª–æ:**
```typescript
export async function getPopularArticles(limit: number = 10, locale?: string): Promise<string[]>
```

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `locale?: string` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π)
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Å—É—Ñ—Ñ–∏–∫—Å—É: `%-en` –∏–ª–∏ `%-pl`
- ‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –æ–±–æ–∏—Ö —è–∑—ã–∫–æ–≤
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏: `üåç Filtering popular articles for locale: en/pl`

### 2. –û–±–Ω–æ–≤–ª–µ–Ω–∞ –≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ `app/[locale]/(site)/page.tsx`

**–ë—ã–ª–æ:**
```typescript
const popularSlugs = await getPopularArticles(12);
```

**–°—Ç–∞–ª–æ:**
```typescript
const popularSlugs = await getPopularArticles(12, params.locale);
```

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚úÖ –ü–µ—Ä–µ–¥–∞–µ—Ç—Å—è `params.locale` –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ —è–∑—ã–∫—É
- ‚úÖ –£–ª—É—á—à–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –æ–¥–∏–Ω–∞–∫–æ–≤–æ –¥–ª—è `en` –∏ `pl`

### 3. –û–±–Ω–æ–≤–ª–µ–Ω API `app/api/analytics/popular-articles/route.ts`

**–ë—ã–ª–æ:**
```typescript
const limit = parseInt(searchParams.get('limit') || '20');
```

**–°—Ç–∞–ª–æ:**
```typescript
const limit = parseInt(searchParams.get('limit') || '20');
const locale = searchParams.get('locale') || undefined; // en –∏–ª–∏ pl
```

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `locale` –≤ query string
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è: —Ç–æ–ª—å–∫–æ `en` –∏–ª–∏ `pl`
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ `.like('article_slug', '%-${locale}')`
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –æ–±–æ–∏—Ö —è–∑—ã–∫–æ–≤

---

## üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

### –ê–Ω–≥–ª–∏–π—Å–∫–∞—è –≤–µ—Ä—Å–∏—è (EN):
1. –û—Ç–∫—Ä—ã—Ç—å https://app.icoffio.com/en
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –≤—Å–µ —Å—Ç–∞—Ç—å–∏ –∑–∞–∫–∞–Ω—á–∏–≤–∞—é—Ç—Å—è –Ω–∞ `-en`
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –Ω–µ—Ç —Å—Ç–∞—Ç–µ–π —Å `-pl`

### –ü–æ–ª—å—Å–∫–∞—è –≤–µ—Ä—Å–∏—è (PL):
1. –û—Ç–∫—Ä—ã—Ç—å https://app.icoffio.com/pl
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –≤—Å–µ —Å—Ç–∞—Ç—å–∏ –∑–∞–∫–∞–Ω—á–∏–≤–∞—é—Ç—Å—è –Ω–∞ `-pl`
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –Ω–µ—Ç —Å—Ç–∞—Ç–µ–π —Å `-en`

### API —Ç–µ—Å—Ç:
```bash
# –ê–Ω–≥–ª–∏–π—Å–∫–∏–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ —Å—Ç–∞—Ç—å–∏
curl "https://app.icoffio.com/api/analytics/popular-articles?limit=10&locale=en"

# –ü–æ–ª—å—Å–∫–∏–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ —Å—Ç–∞—Ç—å–∏
curl "https://app.icoffio.com/api/analytics/popular-articles?limit=10&locale=pl"
```

---

## üìä –†–ï–ó–£–õ–¨–¢–ê–¢

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- ‚ùå –ù–∞ `/en` –º–æ–≥–ª–∏ –±—ã—Ç—å —Å—Ç–∞—Ç—å–∏ —Å `-pl`
- ‚ùå –ù–∞ `/pl` –º–æ–≥–ª–∏ –±—ã—Ç—å —Å—Ç–∞—Ç—å–∏ —Å `-en`
- ‚ùå UX –ø—Ä–æ–±–ª–µ–º–∞: –∫–æ–Ω—Ç–µ–Ω—Ç –Ω–µ –Ω–∞ —Ç–æ–º —è–∑—ã–∫–µ

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- ‚úÖ –ù–∞ `/en` —Ç–æ–ª—å–∫–æ —Å—Ç–∞—Ç—å–∏ —Å `-en`
- ‚úÖ –ù–∞ `/pl` —Ç–æ–ª—å–∫–æ —Å—Ç–∞—Ç—å–∏ —Å `-pl`
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –¥–ª—è –û–ë–û–ò–• —è–∑—ã–∫–æ–≤
- ‚úÖ API –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –æ–±–∞ —è–∑—ã–∫–∞
- ‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ

---

## üéØ –ü–†–ê–í–ò–õ–û –ù–ê –ë–£–î–£–©–ï–ï

**–ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û:** –í—Å–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏ —Ñ—É–Ω–∫—Ü–∏–∏ –≤–Ω–µ–¥—Ä—è—Ç—å –¥–ª—è **–î–í–£–• —è–∑—ã–∫–æ–≤ —Å—Ä–∞–∑—É** (en –ò pl).

–ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö —Ñ–∏—á:
1. ‚úÖ –í—Å–µ–≥–¥–∞ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å `locale` –≤ —Ñ—É–Ω–∫—Ü–∏–∏
2. ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –æ–±–æ–∏—Ö —è–∑—ã–∫–∞—Ö
3. ‚úÖ –ü—Ä–æ–≤–µ—Ä—è—Ç—å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –ø–æ `-en` –∏ `-pl`
4. ‚úÖ –î–æ–±–∞–≤–ª—è—Ç—å –ø–µ—Ä–µ–≤–æ–¥—ã –≤ `lib/i18n.ts` –¥–ª—è –æ–±–æ–∏—Ö —è–∑—ã–∫–æ–≤
5. ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å —è–∑—ã–∫ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

---

## üìù –ü–†–û–í–ï–†–ï–ù–ù–´–ï –§–£–ù–ö–¶–ò–ò

–í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç `locale`:

- ‚úÖ `getAllPosts(limit, locale)` - —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç –ø–æ —è–∑—ã–∫—É
- ‚úÖ `getCategories(locale)` - —É—á–∏—Ç—ã–≤–∞–µ—Ç —è–∑—ã–∫
- ‚úÖ `getPopularArticles(limit, locale)` - **–ò–°–ü–†–ê–í–õ–ï–ù–û** ‚ú®
- ‚úÖ `getRelated(category, slug, limit)` - –∫–æ—Å–≤–µ–Ω–Ω–æ —á–µ—Ä–µ–∑ slug
- ‚úÖ `getPostBySlug(slug, locale)` - –ø–æ slug —Å —è–∑—ã–∫–æ–º

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ READY FOR PRODUCTION  
**–í–µ—Ä—Å–∏—è:** v7.14.1 (Language Filter Fix)


